<!doctype html>
<html lang="pl">
<head>
Â  <meta charset="utf-8" />
Â  <title>Zestawienie MiesiÄ™cznej ObecnoÅ›ci</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
Â  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
Â  
  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibjNQVX1cDxCSGGhQXVMA9zVRvIeGzSA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSZnIDU4pRNTJBt+OhJPKVhDNGgLfTmqgmEqgAkU+S9iUcbZUkPETEzXFsFaiA+wDsLmwzmbQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="css/dziennik.css">
  <style>
Â  Â  /* ... (wszystkie Twoje style CSS pozostajÄ… bez zmian) ... */
Â  Â  body {
Â  Â  Â  padding: 1rem;
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  min-height: 100vh;
Â  Â  }
Â  Â  .main-container {
Â  Â  Â  background-color: #fff;
Â  Â  Â  border-radius: 15px;
Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
Â  Â  Â  overflow: hidden;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }
Â  Â  .header-section {
Â  Â  Â  background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
Â  Â  Â  color: white;
Â  Â  Â  padding: 2rem;
Â  Â  }
Â  Â  .controls-section {
Â  Â  Â  background: #f8f9fa;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  border-bottom: 2px solid #e9ecef;
Â  Â  }
Â  Â  .stats-card {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  }
Â  Â  .stat-box {
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 1rem;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  margin-bottom: 1rem;
Â  Â  }
Â  Â  .stat-present { background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); color: #155724; }
Â  Â  .stat-absent { background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); color: #721c24; }
Â  Â  .stat-late { background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%); color: #856404; }
Â  Â  .stat-excused { background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%); color: #0c5460; }

Â  Â  .calendar-grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(7, 1fr);
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  margin: 1rem 0;
Â  Â  }
Â  Â  .calendar-header {
Â  Â  Â  text-align: center;
Â  Â  Â  font-weight: bold;
Â  Â  Â  padding: 0.5rem;
Â  Â  Â  background: #f8f9fa;
Â  Â  Â  border-radius: 5px;
Â  Â  }
Â  Â  .calendar-day {
Â  Â  Â  aspect-ratio: 1;
Â  Â  Â  border: 2px solid #e9ecef;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  padding: 0.5rem;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  cursor: pointer;
Â  Â  Â  position: relative;
Â  Â  }
Â  Â  .calendar-day:hover {
Â  Â  Â  transform: scale(1.05);
Â  Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
Â  Â  }
Â  Â  .calendar-day.empty {
Â  Â  Â  border: none;
Â  Â  Â  cursor: default;
Â  Â  }
Â  Â  .calendar-day.empty:hover {
Â  Â  Â  transform: none;
Â  Â  Â  box-shadow: none;
Â  Â  }
Â  Â  .day-number {
Â  Â  Â  font-weight: bold;
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  margin-bottom: 0.25rem;
Â  Â  }
Â  Â  .day-status {
Â  Â  Â  font-size: 1.5rem;
Â  Â  }
Â  Â  .status-obecny {
Â  Â  Â  background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
Â  Â  Â  border-color: #28a745;
Â  Â  }
Â  Â  .status-nieobecny {
Â  Â  Â  background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
Â  Â  Â  border-color: #dc3545;
Â  Â  }
Â  Â  .status-spÃ³Åºniony {
Â  Â  Â  background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
Â  Â  Â  border-color: #ffc107;
Â  Â  }
Â  Â  .status-usprawiedliwiony {
Â  Â  Â  background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
Â  Â  Â  border-color: #17a2b8;
Â  Â  }
Â  Â  .status-no-data {
Â  Â  Â  background: #f8f9fa;
Â  Â  Â  border-color: #dee2e6;
Â  Â  }
Â  Â  .client-info {
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  color: white;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  }
Â  Â  .client-photo-large {
Â  Â  Â  width: 80px;
Â  Â  Â  height: 80px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  object-fit: cover;
Â  Â  Â  border: 3px solid white;
Â  Â  }
Â  Â  .chart-container {
Â  Â  Â  position: relative;
Â  Â  Â  height: 250px;
Â  Â  Â  margin: 1rem 0;
Â  Â  }
Â  Â  .legend {
Â  Â  Â  display: flex;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  gap: 1rem;
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  padding: 1rem;
Â  Â  Â  background: #f8f9fa;
Â  Â  Â  border-radius: 8px;
Â  Â  }
Â  Â  .legend-item {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.5rem;
Â  Â  }
Â  Â  .legend-color {
Â  Â  Â  width: 20px;
Â  Â  Â  height: 20px;
Â  Â  Â  border-radius: 4px;
Â  Â  }

Â  Â  /* ... (style FAB Menu - bez zmian) ... */
Â  Â  .fab-container {
Â  Â  Â  position: fixed;
Â  Â  Â  bottom: 2rem;
Â  Â  Â  right: 2rem;
Â  Â  Â  z-index: 1050;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column-reverse;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 1rem;
Â  Â  }
Â  Â  .fab-main {
Â  Â  Â  width: 64px;
Â  Â  Â  height: 64px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
Â  Â  Â  cursor: pointer;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  font-size: 1.8rem;
Â  Â  Â  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  position: relative;
Â  Â  Â  z-index: 2;
Â  Â  }
Â  Â  .fab-main:hover {
Â  Â  Â  transform: scale(1.1);
Â  Â  Â  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
Â  Â  }
Â  Â  .fab-main i {
Â  Â  Â  transition: transform 0.3s ease;
Â  Â  }
Â  Â  .fab-container.open .fab-main i {
Â  Â  Â  transform: rotate(45deg);
Â  Â  }
Â  Â  .fab-menu {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column-reverse;
Â  Â  Â  gap: 0.75rem;
Â  Â  Â  opacity: 0;
Â  Â  Â  transform: translateY(20px) scale(0.8);
Â  Â  Â  pointer-events: none;
Â  Â  Â  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  }
Â  Â  .fab-container.open .fab-menu {
Â  Â  Â  opacity: 1;
Â  Â  Â  transform: translateY(0) scale(1);
Â  Â  Â  pointer-events: all;
Â  Â  }
Â  Â  .fab-item {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 1rem;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  }
Â  Â  .fab-label {
Â  Â  Â  background: white;
Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  Â  Â  font-size: 0.875rem;
Â  Â  Â  font-weight: 500;
Â  Â  Â  white-space: nowrap;
Â  Â  Â  opacity: 0;
Â  Â  Â  transform: translateX(10px);
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  pointer-events: none;
Â  Â  }
Â  Â  .fab-container.open .fab-label {
Â  Â  Â  opacity: 1;
Â  Â  Â  transform: translateX(0);
Â  Â  }
Â  Â  .fab-button {
Â  Â  Â  width: 48px;
Â  Â  Â  height: 48px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: white;
Â  Â  Â  color: #667eea;
Â  Â  Â  border: 2px solid #667eea;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  text-decoration: none;
Â  Â  Â  box-shadow: 0 3px 10px rgba(0,0,0,0.15);
Â  Â  Â  transition: all 0.3s ease;
Â  Â  }
Â  Â  .fab-button:hover {
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  color: white;
Â  Â  Â  transform: scale(1.15);
Â  Â  Â  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
Â  Â  }
Â  Â  .fab-backdrop {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  right: 0;
Â  Â  Â  bottom: 0;
Â  Â  Â  background: rgba(0, 0, 0, 0.3);
Â  Â  Â  opacity: 0;
Â  Â  Â  pointer-events: none;
Â  Â  Â  transition: opacity 0.3s ease;
Â  Â  Â  z-index: 1049;
Â  S }
Â  Â  .fab-container.open ~ .fab-backdrop {
Â  Â  Â  opacity: 1;
Â  Â  Â  pointer-events: all;
Â  Â  }

Â  Â  @media (max-width: 768px) {
Â  Â  Â  .calendar-grid {
Â  Â  Â  Â  gap: 0.25rem;
Â  Â  Â  }
Â  Â  Â  .calendar-day {
Â  Â  Â  Â  padding: 0.25rem;
Â  Â  Â  }
Â  Â  Â  .day-number {
Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  }
Â  Â  Â  .day-status {
Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="main-container">
Â  Â  Â  Â  <div class="header-section text-center">
Â  Â  Â  <h1 class="display-6 mb-2">ğŸ“Š Zestawienie MiesiÄ™cznej ObecnoÅ›ci</h1>
Â  Â  Â  <p class="lead mb-0">Raport obecnoÅ›ci dla wybranego klienta</p>
Â  Â  </div>

Â  Â  Â  Â  <div class="controls-section">
Â  Â  Â  <div class="row g-3">
Â  Â  Â  Â  <div class="col-md-6">
Â  Â  Â  Â  Â  <label class="form-label"><strong>Wyszukaj klienta</strong></label>
          <input type="text" id="clientSearch" class="form-control mb-2" placeholder="Wpisz imiÄ™, nazwisko...">

Â  Â  Â  Â  Â  <label class="form-label"><strong>Wybierz klienta</strong></label>
Â  Â  Â  Â  Â  <select id="clientSelect" class="form-select">
Â  Â  Â  Â  Â  Â  <option value="">Åadowanie klientÃ³w...</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  <label class="form-label"><strong>MiesiÄ…c</strong></label>
Â  Â  Â  Â  Â  <select id="monthSelect" class="form-select">
Â  Â  Â  Â  Â  Â  <option value="0">StyczeÅ„</option>
Â  Â  Â  Â  Â  Â  <option value="1">Luty</option>
Â  Â  Â  Â  Â  Â  <option value="2">Marzec</option>
Â  Â  Â  Â  Â  Â  <option value="3">KwiecieÅ„</option>
Â  Â  Â  Â  Â  Â  <option value="4">Maj</option>
Â  Â  Â  Â  Â  Â  <option value="5">Czerwiec</option>
Â  Â  Â  Â  Â  Â  <option value="6">Lipiec</option>
Â  Â  Â  Â  Â  Â  <option value="7">SierpieÅ„</option>
Â  Â  Â  Â  Â  Â  <option value="8">WrzesieÅ„</option>
Â  Â  Â  Â  Â  Â  <option value="9">PaÅºdziernik</option>
Â  Â  Â  Â  Â  Â  <option value="10">Listopad</option>
Â  Â  Â  Â  Â  Â  <option value="11">GrudzieÅ„</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  <label class="form-label"><strong>Rok</strong></label>
Â  Â  Â  Â  Â  <select id="yearSelect" class="form-select">
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div class="row mt-3">
Â  Â  Â  Â  <div class="col-12">
Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="loadReport()">
Â  Â  Â  Â  Â  Â  <i class="bi bi-bar-chart-fill"></i> Wygeneruj raport
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  <button id="exportPdfBtn" class="btn btn-success" onclick="exportPDF()">
Â  Â  Â  Â  Â  Â  <i class="bi bi-download"></i> Eksportuj PDF
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div id="alertBox" class="m-3"></div>

Â  Â  Â  Â  <div id="reportContent" class="p-3" style="display: none;">

Â  Â  Â  Â  Â  Â  <div class="client-info">
Â  Â  Â  Â  <div class="row align-items-center">
Â  Â  Â  Â  Â  <div class="col-auto">
Â  Â  Â  Â  Â  Â  <img id="clientPhoto" src="" alt="Klient" class="client-photo-large">
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  <h3 id="clientName" class="mb-1"></h3>
Â  Â  Â  Â  Â  Â  <p class="mb-0" id="clientDetails"></p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="stats-card">
Â  Â  Â  Â  <h5 class="mb-3"><i class="bi bi-graph-up"></i> Podsumowanie obecnoÅ›ci</h5>
Â  Â  Â  Â  <div class="row">
Â  Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  Â  <div class="stat-box stat-present">
Â  Â  Â  Â  Â  Â  Â  <div class="display-6" id="statPresent">0</div>
Â  Â  Â  Â  Â  Â  Â  <small><strong>Obecny</strong></small>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  Â  <div class="stat-box stat-absent">
Â  Â  Â  Â  Â  Â  Â  <div class="display-6" id="statAbsent">0</div>
Â  Â  Â  Â  Â  Â  Â  <small><strong>Nieobecny</strong></small>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  Â  <div class="stat-box stat-late">
Â  Â  Â  Â  Â  Â  Â  <div class="display-6" id="statLate">0</div>
Â  Â  Â  Â  Â  Â  Â  <small><strong>SpÃ³Åºniony</strong></small>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col-md-3">
Â  Â  Â  Â  Â  Â  <div class="stat-box stat-excused">
Â  Â  Â  Â  Â  Â  Â  <div class="display-6" id="statExcused">0</div>
Â  Â  Â  Â  Â  Â  Â  <small><strong>Usprawiedliwiony</strong></small>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="mt-3 text-center">
Â  Â  Â  Â  Â  <h4>Frekwencja: <span id="attendanceRate" class="text-primary">0%</span></h4>
Â  Â  Â  Â  Â  <small class="text-muted">Procent obecnoÅ›ci wzglÄ™dem zaplanowanych zajÄ™Ä‡</small>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="stats-card">
Â  Â  Â  Â  <h5 class="mb-3"><i class="bi bi-calendar3"></i> Kalendarz obecnoÅ›ci</h5>
Â  Â  Â  Â  <h6 class="text-center text-muted mb-3" id="calendarTitle"></h6>

Â  Â  Â  Â  <div class="calendar-grid">
Â  Â  Â  Â  Â  <div class="calendar-header">Pn</div>
Â  Â  Â  Â  Â  <div class="calendar-header">Wt</div>
Â  Â  Â  Â  Â  <div class="calendar-header">Åšr</div>
Â  Â  Â  Â  Â  <div class="calendar-header">Cz</div>
Â  Â  Â  Â  Â  <div class="calendar-header">Pt</div>
Â  Â  Â  Â  Â  <div class="calendar-header">So</div>
Â  Â  Â  Â  Â  <div class="calendar-header">Nd</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="calendar-grid" id="calendarDays"></div>

Â  Â  Â  Â  <div class="legend">
Â  Â  Â  Â  Â  <div class="legend-item">
Â  Â  Â  Â  Â  Â  <div class="legend-color" style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);"></div>
Â  Â  Â  Â  Â  Â  <span>Obecny</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="legend-item">
Â  Â  Â  Â  Â  Â  <div class="legend-color" style="background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);"></div>
Â  Â  Â  Â  Â  Â  <span>Nieobecny</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="legend-item">
Â  Â  Â  Â  Â  Â  <div class="legend-color" style="background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);"></div>
Â  Â  Â  Â  Â  Â  <span>SpÃ³Åºniony</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="legend-item">
Â  Â  Â  Â  Â  Â  <div class="legend-color" style="background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);"></div>
Â  Â  Â  Â  Â  Â  <span>Usprawiedliwiony</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="legend-item">
Â  Â  Â  Â  Â  Â  <div class="legend-color" style="background: #f8f9fa; border: 1px solid #dee2e6;"></div>
Â  Â  Â  Â  Â  Â  <span>Brak danych</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="stats-card">
Â  Â  Â  Â  <h5 class="mb-3"><i class="bi bi-pie-chart-fill"></i> Wykres obecnoÅ›ci</h5>
Â  Â  Â  Â  <div class="chart-container">
Â  Â  Â  Â  Â  <canvas id="attendanceChart"></canvas>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  </div>
Â  </div>

Â  <div class="fab-container" id="fabContainer">
Â  Â  <div class="fab-menu">
Â  Â  Â  <div class="fab-item">
Â  Â  Â  Â  <span class="fab-label">Strona gÅ‚Ã³wna</span>
Â  Â  Â  Â  <a href="index.html" class="fab-button" title="Strona gÅ‚Ã³wna">
Â  Â  Â  Â  Â  <i class="bi bi-house-fill"></i>
Â  Â  Â  Â  </a>
Â  Â  Â  </div>
Â  Â  Â  <div class="fab-item">
Â  Â  Â  Â  <span class="fab-label">Lista obecnoÅ›ci</span>
Â  Â  Â  Â  <a href="attendance.html" class="fab-button" title="Lista obecnoÅ›ci">
Â  Â  Â  Â  Â  <i class="bi bi-clipboard-check"></i>
Â  Â  Â  Â  </a>
Â  Â  Â  </div>
Â  Â  Â  <div class="fab-item">
Â  Â  Â  Â  <span class="fab-label">Klienci</span>
Â  Â  Â  Â  <a href="klienci.html" class="fab-button" title="Lista klientÃ³w">
Â  Â  Â  Â  Â  <i class="bi bi-people-fill"></i>
Â  Â  Â  Â  </a>
Â  Â  Â  </div>
Â  Â  Â  <div class="fab-item">
Â  Â  Â  Â  <span class="fab-label">Plan SUO</span>
Â  Â  Â  Â  <a href="panel.html" class="fab-button" title="Plan SUO">
Â  Â  Â  Â  Â  <i class="bi bi-calendar3"></i>
Â  Â  Â  Â  </a>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <button class="fab-main" id="fabMainBtn" aria-label="Menu nawigacji">
Â  Â  Â  <i class="bi bi-plus-lg"></i>
Â  Â  </button>
Â  </div>

Â  <div class="fab-backdrop" id="fabBackdrop"></div>


Â  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
Â  <script>
Â  Â  const API_URL = ""; 
Â  Â  let allClients = [];
Â  Â  let attendanceData = {};
Â  Â  let currentChart = null;
    // NOWOÅšÄ†: Deklaracja dla jsPDF
    const { jsPDF } = window.jspdf;

Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  setupEventListeners();
Â  Â  Â  initializeSelects();
Â  Â  Â  loadClients();
Â  Â  });

Â  Â  function setupEventListeners() {
      // ... (obsÅ‚uga FAB Menu - bez zmian) ...
Â  Â  Â  const fabContainer = document.getElementById('fabContainer');
Â  Â  Â  const fabMainBtn = document.getElementById('fabMainBtn');
Â  Â  Â  const fabBackdrop = document.getElementById('fabBackdrop');

Â  Â  Â  if (fabMainBtn) {
Â  Â  Â  Â  fabMainBtn.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  fabContainer.classList.toggle('open');
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  if (fabBackdrop) {
Â  Â  Â  Â  fabBackdrop.addEventListener('click', () => {
Â  Â  Â  Â  Â  fabContainer.classList.remove('open');
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  document.querySelectorAll('.fab-button').forEach(btn => {
Â  Â  Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  Â  Â  fabContainer.classList.remove('open');
Â  Â  Â  Â  });
Â  Â  Â  });

Â  Â  Â  document.addEventListener('keydown', (e) => {
Â  Â  Â  Â  if (e.key === 'Escape' && fabContainer.classList.contains('open')) {
Â  Â  Â  Â  Â  fabContainer.classList.remove('open');
Â  Â  Â  Â  }
Â  Â  Â  });

      // NOWOÅšÄ†: Listener dla wyszukiwarki klientÃ³w
      document.getElementById('clientSearch').addEventListener('input', filterClients);
Â  Â  }

Â  Â  function initializeSelects() {
Â  Â  Â  const today = new Date();
Â  Â  Â  const yearSelect = document.getElementById('yearSelect');
Â  Â  Â  const monthSelect = document.getElementById('monthSelect');

Â  Â  Â  for (let year = today.getFullYear(); year >= today.getFullYear() - 5; year--) {
Â  Â  Â  Â  const option = document.createElement('option');
Â  Â  Â  Â  option.value = year;
Â  Â  Â  Â  option.textContent = year;
Â  Â  Â  Â  yearSelect.appendChild(option);
Â  Â  Â  }

Â  Â  Â  monthSelect.value = today.getMonth();
Â  Â  Â  yearSelect.value = today.getFullYear();
Â  Â  }

    // NOWOÅšÄ†: Funkcja do (re)populacji listy klientÃ³w
    function populateClientList(clientsToShow) {
        const select = document.getElementById('clientSelect');
        const selectedValue = select.value;
        select.innerHTML = ''; // WyczyÅ›Ä‡ listÄ™

        // Dodaj opcjÄ™ domyÅ›lnÄ…
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = '-- Wybierz klienta --';
        select.appendChild(defaultOption);

        // Sortuj i dodaj przefiltrowanych klientÃ³w
        clientsToShow
            .sort((a, b) => (a.full_name || '').localeCompare(b.full_name || ''))
            .forEach(client => {
                const option = document.createElement('option');
                option.value = client.client_id || client.id;
                option.textContent = client.full_name || 'Brak nazwy';
                select.appendChild(option);
            });
        
        // SprÃ³buj przywrÃ³ciÄ‡ zaznaczenie, jeÅ›li nadal pasuje
        if (Array.from(select.options).some(opt => opt.value === selectedValue)) {
            select.value = selectedValue;
        }
    }

    // NOWOÅšÄ†: Funkcja filtrujÄ…ca wywoÅ‚ywana przez input
    function filterClients() {
        const searchTerm = document.getElementById('clientSearch').value.toLowerCase().trim();
        const activeClients = allClients.filter(c => c.active !== false);
        
        if (!searchTerm) {
            populateClientList(activeClients); // PokaÅ¼ wszystkich aktywnych, jeÅ›li wyszukiwarka pusta
            return;
        }

        const filteredClients = activeClients.filter(c => 
            (c.full_name || '').toLowerCase().includes(searchTerm)
        );
        populateClientList(filteredClients);
    }

Â  Â  async function loadClients() {
Â  Â  Â  try {
Â  Â  Â  Â  const response = await fetch(`${API_URL}/api/clients`);
Â  Â  Â  Â  if (!response.ok) throw new Error('BÅ‚Ä…d pobierania klientÃ³w');

Â  Â  Â  Â  allClients = await response.json();
        
        // NOWOÅšÄ†: Zamiast budowaÄ‡ listÄ™ tutaj, wywoÅ‚ujemy funkcjÄ™ filtrujÄ…cÄ…,
        // ktÃ³ra zajmie siÄ™ poczÄ…tkowym zapeÅ‚nieniem listy
        filterClients(); 

Â  Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('BÅ‚Ä…d Å‚adowania klientÃ³w:', error);
Â  Â  Â  Â  showAlert('Nie udaÅ‚o siÄ™ zaÅ‚adowaÄ‡ listy klientÃ³w', 'danger');
        // W razie bÅ‚Ä™du, wyczyÅ›Ä‡ "Å‚adowanie"
        const select = document.getElementById('clientSelect');
        select.innerHTML = '<option value="">BÅ‚Ä…d Å‚adowania</option>';
Â  Â  Â  }
Â  Â  }

Â  Â  async function loadReport() {
      // ... (funkcja bez zmian) ...
  Â  Â  const clientId = document.getElementById('clientSelect').value;
  Â  Â  const month = parseInt(document.getElementById('monthSelect').value);
  Â  Â  const year = parseInt(document.getElementById('yearSelect').value);

  Â  Â  if (!clientId) {
  Â  Â  Â  Â  showAlert('Wybierz klienta', 'warning');
  Â  Â  Â  Â  return;
  Â  Â  }

  Â  Â  const client = allClients.find(c => (c.client_id || c.id) == clientId);
  Â  Â  if (!client) {
  Â  Â  Â  Â  showAlert('Nie znaleziono klienta', 'danger');
  Â  Â  Â  Â  return;
  Â  Â  }

  Â  Â  showAlert('Generowanie raportu...', 'info');

  Â  Â  try {
  Â  Â  Â  Â  const startDate = new Date(year, month, 1);
  Â  Â  Â  Â  const endDate = new Date(year, month + 1, 0);

  Â  Â  Â  Â  attendanceData = {};

  Â  Â  Â  Â  console.log("ğŸ” Pobieram obecnoÅ›Ä‡ dla:", {
  Â  Â  Â  Â  Â  Â  client: client.full_name,
  Â  Â  Â  Â  Â  Â  clientId: clientId,
  Â  Â  Â  Â  Â  Â  month: month + 1,
  Â  Â  Â  Â  Â  Â  year: year,
  Â  Â  Â  Â  Â  Â  startDate: startDate.toISOString().split('T')[0],
  Â  Â  Â  Â  Â  Â  endDate: endDate.toISOString().split('T')[0]
  Â  Â  Â  Â  });

  Â  Â  Â  Â  let foundCount = 0;

  Â  Â  Â  Â  for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
  Â  Â  Â  Â  Â  Â  d.setHours(12, 0, 0, 0); 
  Â  Â  Â  Â  Â  Â  const dateStr = d.toISOString().split('T')[0];

  Â  Â  Â  Â  Â  Â  try {
  Â  Â  Â  Â  Â  Â  Â  Â  const url = `${API_URL}/api/attendance?date=${dateStr}&client_id=${clientId}`;
  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Â  Â ğŸ“¡ Zapytanie: ${url}`);

  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(url);

  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Â  Â ğŸ“¥ OdpowiedÅº dla ${dateStr}:`, data);

  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const clientRecord = data.find(a => a.client_id == clientId);
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (clientRecord) {
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  attendanceData[dateStr] = clientRecord;
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  foundCount++;
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Â  Â âœ… Znaleziono obecnoÅ›Ä‡: ${clientRecord.status}`);
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
  Â  Â  Â  Â  Â  Â  Â  Â  } else {
  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Â  Â âš ï¸ HTTP ${response.status} dla ${dateStr}`);
  Â  Â  Â  Â  Â  Â  Â  Â  }
  Â  Â  Â  Â  Â  Â  } catch (e) {
  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Â  Â âŒ BÅ‚Ä…d dla ${dateStr}:`, e.message);
  Â  Â  Â  Â  Â  Â  }
  Â  Â  Â  Â  }

  Â  Â  Â  Â  console.log(`ğŸ¯ PODSUMOWANIE: Znaleziono ${foundCount} dni z obecnoÅ›ciÄ…`);
  Â  Â  Â  Â  console.log("ğŸ“‹ attendanceData:", attendanceData);

  Â  Â  Â  Â  displayReport(client, month, year);
  Â  Â  Â  Â  showAlert(`Raport wygenerowany (${foundCount} wpisÃ³w)`, 'success');

  Â  Â  } catch (error) {
  Â  Â  Â  Â  console.error('âŒ BÅ‚Ä…d generowania raportu:', error);
  Â  Â  Â  Â  showAlert('BÅ‚Ä…d podczas generowania raportu', 'danger');
  Â  Â  }
  }

Â  Â  function displayReport(client, month, year) {
Â  Â  Â  // ... (funkcja bez zmian) ...
Â  Â  Â  document.getElementById('reportContent').style.display = 'block';

Â  Â  Â  const initials = (client.full_name || 'K').charAt(0).toUpperCase();
Â  Â  Â  const avatarSVG = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Ccircle cx='40' cy='40' r='40' fill='%23667eea'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.35em' fill='white' font-size='36' font-family='Arial'%3E${initials}%3C/text%3E%3C/svg%3E`;

Â  Â  Â  document.getElementById('clientPhoto').src = client.photo_url || avatarSVG;
Â  Â  Â  document.getElementById('clientName').textContent = client.full_name;
Â  Â  Â  document.getElementById('clientDetails').textContent = `Tel: ${client.phone || 'Brak'} | Email: ${client.email || 'Brak'}`;

Â  Â  Â  const stats = calculateStats();
Â  Â  Â  document.getElementById('statPresent').textContent = stats.obecny;
Â  Â  Â  document.getElementById('statAbsent').textContent = stats.nieobecny;
Â  Â  Â  document.getElementById('statLate').textContent = stats.spÃ³Åºniony;
Â  Â  Â  document.getElementById('statExcused').textContent = stats.usprawiedliwiony;

Â  Â  Â  const totalScheduled = stats.obecny + stats.nieobecny + stats.spÃ³Åºniony + stats.usprawiedliwiony;
Â  Â  Â  const rate = totalScheduled > 0 ? Math.round((stats.obecny / totalScheduled) * 100) : 0;
Â  Â  Â  document.getElementById('attendanceRate').textContent = rate + '%';

Â  Â  Â  const monthNames = ['StyczeÅ„', 'Luty', 'Marzec', 'KwiecieÅ„', 'Maj', 'Czerwiec',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Lipiec', 'SierpieÅ„', 'WrzesieÅ„', 'PaÅºdziernik', 'Listopad', 'GrudzieÅ„'];
Â  Â  Â  document.getElementById('calendarTitle').textContent = `${monthNames[month]} ${year}`;

Â  Â  Â  displayCalendar(month, year);
Â  Â  Â  displayChart(stats);
Â  Â  }

Â  Â  function calculateStats() {
Â  Â  Â  // ... (funkcja bez zmian) ...
Â  Â  Â  const stats = {
Â  Â  Â  Â  obecny: 0,
Â  Â  Â  Â  nieobecny: 0,
Â  Â  Â  Â  spÃ³Åºniony: 0,
Â  Â  Â  Â  usprawiedliwiony: 0
Â  Â  Â  };

Â  Â  Â  Object.values(attendanceData).forEach(record => {
Â  Â  Â  Â  if (record.status && stats.hasOwnProperty(record.status)) {
Â  Â  Â  Â  Â  stats[record.status]++;
Â  Â  Â  Â  }
Â  Â  Â  });

Â  Â  Â  return stats;
Â  Â  }

Â  Â  function displayCalendar(month, year) {
Â  Â  Â  // ... (funkcja bez zmian) ...
Â  Â  Â  const calendarDays = document.getElementById('calendarDays');
Â  Â  Â  calendarDays.innerHTML = '';

Â  Â  Â  const firstDay = new Date(year, month, 1);
Â  Â  Â  const lastDay = new Date(year, month + 1, 0);

Â  Â  Â  let dayOfWeek = firstDay.getDay();
Â  Â  Â  dayOfWeek = dayOfWeek === 0 ? 6 : dayOfWeek - 1;

Â  Â  Â  for (let i = 0; i < dayOfWeek; i++) {
Â  Â  Â  Â  const emptyDay = document.createElement('div');
Â  Â  Â  Â  emptyDay.className = 'calendar-day empty';
Â  Â  Â  Â  calendarDays.appendChild(emptyDay);
Â  Â  Â  }

Â  Â  Â  for (let day = 1; day <= lastDay.getDate(); day++) {
Â  Â  Â  Â  const date = new Date(year, month, day, 12, 0, 0);Â 
Â  Â  Â  Â  const dateStr = date.toISOString().split('T')[0];
Â  Â  Â  Â  const record = attendanceData[dateStr];

Â  Â  Â  Â  const dayDiv = document.createElement('div');
Â  Â  Â  Â  dayDiv.className = 'calendar-day';

Â  Â  Â  Â  if (record && record.status) {
Â  Â  Â  Â  Â  dayDiv.classList.add(`status-${record.status}`);
Â  Â  Â  Â  Â  const statusEmoji = {
Â  Â  Â  Â  Â  Â  'obecny': 'âœ…',
Â  Â  Â  Â  Â  Â  'nieobecny': 'âŒ',
Â  Â  Â  Â  Â  Â  'spÃ³Åºniony': 'â°',
Â  Â  Â  Â  Â  Â  'usprawiedliwiony': 'ğŸ“'
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  dayDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="day-number">${day}</div>
Â  Â  Â  Â  Â  Â  <div class="day-status">${statusEmoji[record.status] || ''}</div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  dayDiv.title = `${day} - ${record.status}${record.notes ? '\n' + record.notes : ''}`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  dayDiv.classList.add('status-no-data');
Â  Â  Â  Â  Â  dayDiv.innerHTML = `<div class="day-number">${day}</div>`;
Â  Â  Â  Â  Â  dayDiv.title = `${day} - Brak danych`;
Â  Â  Â  Â  }

Â  Â  Â  Â  calendarDays.appendChild(dayDiv);
Â  Â  Â  }
Â  Â  }

Â  Â  function displayChart(stats) {
Â  Â  Â  // ... (funkcja bez zmian) ...
Â  Â  Â  const ctx = document.getElementById('attendanceChart');

Â  Â  Â  if (currentChart) {
Â  Â  Â  Â  currentChart.destroy();
Â  Â  Â  }

Â  Â  Â  currentChart = new Chart(ctx, {
Â  Â  Â  Â  type: 'doughnut',
Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  labels: ['Obecny', 'Nieobecny', 'SpÃ³Åºniony', 'Usprawiedliwiony'],
Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  data: [stats.obecny, stats.nieobecny, stats.spÃ³Åºniony, stats.usprawiedliwiony],
Â  Â  Â  Â  Â  Â  backgroundColor: [
Â  Â  Â  Â  Â  Â  Â  'rgba(40, 167, 69, 0.8)',
Â  Â  Â  Â  Â  Â  Â  'rgba(220, 53, 69, 0.8)',
Â  Â  Â  Â  Â  Â  Â  'rgba(255, 193, 7, 0.8)',
Â  Â  Â  Â  Â  Â  Â  'rgba(23, 162, 184, 0.8)'
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  borderColor: [
Â  Â  Â  Â  Â  Â  Â  'rgba(40, 167, 69, 1)',
Â  Â  Â  Â  Â  Â  Â  'rgba(220, 53, 69, 1)',
Â  Â  Â  Â  Â  Â  Â  'rgba(255, 193, 7, 1)',
Â  Â  Â  Â  Â  Â  Â  'rgba(23, 162, 184, 1)'
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  borderWidth: 2
Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  },
Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  maintainAspectRatio: false,
Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  legend: {
Â  Â  Â  Â  Â  Â  Â  position: 'bottom',
Â  Â  Â  Â  Â  Â  Â  labels: {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 15,
Â  Â  Â  Â  Â  Â  Â  Â  font: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  size: 14
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  Â  Â  label: function(context) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const label = context.label || '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  const value = context.parsed || 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  const total = context.dataset.data.reduce((a, b) => a + b, 0);
Â  Â  Â  Â  Â  Â  Â  Â  Â  const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  return `${label}: ${value} (${percentage}%)`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  }

    // NOWOÅšÄ†: Zaktualizowana funkcja eksportu do PDF
    async function exportPDF() {
        const reportElement = document.getElementById('reportContent');
        if (reportElement.style.display === 'none') {
            showAlert('Najpierw wygeneruj raport, aby go wyeksportowaÄ‡.', 'warning');
            return;
        }

        const btn = document.getElementById('exportPdfBtn');
        const originalHtml = btn.innerHTML;
        btn.disabled = true;
        btn.innerHTML = `<span class="spinner-border spinner-border-sm" role="status"></span> Generowanie...`;

        try {
            // Pobranie nazwy klienta i daty do nazwy pliku
            const clientName = document.getElementById('clientName').textContent.replace(/ /g, '_');
            const monthText = document.getElementById('monthSelect').options[document.getElementById('monthSelect').selectedIndex].text;
            const year = document.getElementById('yearSelect').value;
            const fileName = `Raport_Obecnosci_${clientName}_${monthText}_${year}.pdf`;

            // UÅ¼yj html2canvas do zrobienia "zrzutu" elementu
            // ZwiÄ™kszona skala dla lepszej jakoÅ›ci w PDF
            const canvas = await html2canvas(reportElement, { scale: 2 });
            const imgData = canvas.toDataURL('image/png');

            const pdf = new jsPDF('p', 'mm', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            
            const margin = 10; // 10mm marginesu
            const imgWidth = pdfWidth - margin * 2;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;
            
            let heightLeft = imgHeight;
            let position = margin;

            // Dodaj pierwszy obraz
            pdf.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
            heightLeft -= (pdfHeight - margin * 2); // Odejmij wysokoÅ›Ä‡ strony (z marginesami)

            // Dodawaj kolejne strony, jeÅ›li obraz jest za wysoki
            while (heightLeft > 0) {
                position = margin - (imgHeight - heightLeft); // PrzesuÅ„ obraz "w gÃ³rÄ™" na nowej stronie
                pdf.addPage();
                pdf.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
                heightLeft -= (pdfHeight - margin * 2);
            }

            // Zapisz plik
            pdf.save(fileName);
            showAlert('Raport PDF zostaÅ‚ wygenerowany!', 'success');

        } catch (error) {
            console.error("BÅ‚Ä…d podczas generowania PDF:", error);
            showAlert('WystÄ…piÅ‚ bÅ‚Ä…d podczas generowania PDF.', 'danger');
        } finally {
            // PrzywrÃ³Ä‡ przycisk do stanu pierwotnego
            btn.disabled = false;
            btn.innerHTML = originalHtml;
        }
    }


Â  Â  function showAlert(message, type) {
Â  Â  Â  // ... (funkcja bez zmian) ...
Â  Â  Â  const alertBox = document.getElementById('alertBox');
Â  Â  Â  alertBox.innerHTML = `
Â  Â  Â  Â  <div class="alert alert-${type} alert-dismissible fade show" role="alert">
Â  Â  Â  Â  Â  ${message}
Â  Â  Â  Â  Â  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
Â  Â  Â  Â  </div>
Â  Â  Â  `;

Â  Â  Â  if (type !== 'danger') {
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  const alert = alertBox.querySelector('.alert');
Â  Â  Â  Â  Â  if (alert) alert.remove();
Â  Â  Â  Â  }, 5000);
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>


