<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <title>Test API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

    <h1>Test API dla Globalnego Kalendarza TUS</h1>
    <p>Ten test sprawdza, czy endpoint <code>/api/tus/schedule</code> zwraca jakiekolwiek dane dla miesiąca 2025-09.</p>

    <button id="testButton" class="btn btn-primary">Testuj API</button>

    <h3 class="mt-4">Wynik:</h3>
    <pre id="result" class="bg-light p-3 border rounded">Czekam na uruchomienie testu...</pre>

<script>
    document.getElementById('testButton').addEventListener('click', async () => {
        const resultEl = document.getElementById('result');
        const month = '2025-09'; // Używamy na sztywno miesiąca, w którym wiesz, że są dane

        resultEl.textContent = `Ładowanie danych dla miesiąca ${month}...`;

        try {
            const response = await fetch(`/api/tus/schedule?month=${month}`);

            // Sprawdzamy, czy odpowiedź jest OK, zanim spróbujemy ją przetworzyć
            if (!response.ok) {
                throw new Error(`Błąd serwera: ${response.status} ${response.statusText}`);
            }

            const data = await response.json();

            // Wyświetlamy surową odpowiedź JSON, sformatowaną dla czytelności
            resultEl.textContent = JSON.stringify(data, null, 2);

        } catch (error) {
            resultEl.textContent = `Wystąpił błąd: \n\n${error.message}`;
            console.error(error);
        }
    });
</script>

</body>
</html>